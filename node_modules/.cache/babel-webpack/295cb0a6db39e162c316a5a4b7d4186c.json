{"ast":null,"code":"import { EventEmitter, Component, Input, Output, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\n\nfunction NgxStarsComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 3);\n    ɵngcc0.ɵɵlistener(\"click\", function NgxStarsComponent_div_2_Template_div_click_0_listener($event) {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r3);\n      const star_r1 = restoredCtx.$implicit;\n      const ctx_r2 = ɵngcc0.ɵɵnextContext();\n      return ctx_r2.readonly ? ctx_r2.noop() : ctx_r2.onStarClick($event, star_r1);\n    })(\"mousemove\", function NgxStarsComponent_div_2_Template_div_mousemove_0_listener($event) {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r3);\n      const star_r1 = restoredCtx.$implicit;\n      const ctx_r4 = ɵngcc0.ɵɵnextContext();\n      return ctx_r4.readonly ? ctx_r4.noop() : ctx_r4.onStarHover($event, star_r1);\n    });\n    ɵngcc0.ɵɵelement(1, \"span\", 4);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const star_r1 = ctx.$implicit;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngStyle\", ctx_r0.starPadding());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngClass\", star_r1.classname)(\"ngStyle\", ctx_r0.starColorAndSize());\n  }\n}\n\nlet NgxStarsComponent = /*#__PURE__*/(() => {\n  class NgxStarsComponent {\n    constructor() {\n      this.maxStars = 5;\n      this.initialStars = 0;\n      this.animationSpeed = 100;\n      this.wholeStars = false;\n      this.ratingOutput = new EventEmitter();\n      this.customClassIdentifier = Math.random().toString(36).substring(2);\n\n      this.safeSize = () => Number.isInteger(this.size) && this.size > 0 && this.size < 6 ? this.size : 1;\n    }\n\n    ngOnInit() {\n      this.setupStarImages();\n      this.editableStars = Array.from(new Array(this.maxStars)).map((elem, index) => new EditableStar(index));\n      this.setRating(this.initialStars);\n\n      if (this.animation) {\n        this.animationInterval = setInterval(this.starAnimation.bind(this), this.animationSpeed);\n      }\n    }\n\n    ngOnDestroy() {\n      // remove the three custom classes we created if custom image urls were provided\n      if (this.customCssClasses) {\n        this.customCssClasses.forEach(style => {\n          if (style && style.parentNode) {\n            style.parentNode.removeChild(style);\n          }\n        });\n      }\n    }\n\n    setupStarImages() {\n      if (this.customStarIcons) {\n        this.customCssClasses = [];\n        Object.keys(this.customStarIcons).map(key => key).forEach(starType => {\n          const classname = this.getStarClass(starType);\n          this.createCssClass(classname, starType);\n        });\n      }\n    }\n\n    createCssClass(classname, starType) {\n      const clazz = document.createElement('style');\n      clazz.type = 'text/css';\n      clazz.innerHTML = `.${classname} {\n      -webkit-mask-image: url(${this.customStarIcons[starType]});\n      mask-image: url(${this.customStarIcons[starType]});\n    }`;\n      document.getElementsByTagName('head')[0].appendChild(clazz);\n      this.customCssClasses.push(clazz);\n    }\n\n    starPadding() {\n      return {\n        'margin-right': this.customPadding || `0.${this.safeSize()}rem`\n      };\n    }\n\n    starColorAndSize() {\n      return Object.assign({}, this.starColor(), this.starSize());\n    }\n\n    starColor() {\n      return {\n        'background-color': this.color || 'crimson'\n      };\n    }\n\n    starSize() {\n      return {\n        height: `${15 * this.safeSize()}px`,\n        width: `${16 * this.safeSize()}px`\n      };\n    }\n\n    starAnimation() {\n      this.animationRunning = true;\n\n      if (this.rating < this.maxStars) {\n        this.setRating(this.rating += 0.5);\n      } else {\n        this.setRating(0);\n      }\n    }\n\n    cancelStarAnimation() {\n      if (this.animationRunning) {\n        clearInterval(this.animationInterval);\n        this.rating = 0;\n        this.animationRunning = false;\n      }\n    }\n\n    setRating(rating) {\n      this.rating = Math.round(rating * 2) / 2;\n      this.onStarsUnhover();\n    }\n\n    onStarHover(event, clickedStar) {\n      this.cancelStarAnimation();\n      const clickedInFirstHalf = this.clickedInFirstHalf(event); // fill in either a half or whole star depending on where user clicked\n\n      clickedStar.classname = !this.wholeStars && clickedInFirstHalf ? this.getStarClass('half') : this.getStarClass('full'); // fill in all stars in previous positions and clear all in later ones\n\n      this.editableStars.forEach(star => {\n        if (star.position > clickedStar.position) {\n          star.classname = this.getStarClass('empty');\n        } else if (star.position < clickedStar.position) {\n          star.classname = this.getStarClass('full');\n        }\n      });\n    }\n\n    onStarClick(event, clickedStar) {\n      this.cancelStarAnimation(); // lock in current rating\n\n      const clickedInFirstHalf = this.clickedInFirstHalf(event);\n      this.rating = clickedStar.position + (!this.wholeStars && clickedInFirstHalf ? 0.5 : 1);\n      this.ratingOutput.emit(this.rating);\n    } // hidden star to left of first star lets user click there to set to 0\n\n\n    onZeroStarClick() {\n      this.setRating(0);\n      this.ratingOutput.emit(this.rating);\n    }\n\n    onZeroStarHover() {\n      // clear all stars\n      this.editableStars.forEach(star => star.classname = this.getStarClass('empty'));\n    }\n\n    onStarsUnhover() {\n      // when user stops hovering we want to make stars reflect the last rating applied by clicking\n      this.editableStars.forEach(star => {\n        const starNumber = star.position + 1;\n\n        if (this.rating >= starNumber) {\n          star.classname = this.getStarClass('full');\n        } else if (this.rating > starNumber - 1 && this.rating < starNumber) {\n          star.classname = this.getStarClass('half');\n        } else {\n          star.classname = this.getStarClass('empty');\n        }\n      });\n    }\n\n    clickedInFirstHalf(event) {\n      const starIcon = event.target;\n      return event.pageX < starIcon.getBoundingClientRect().left + starIcon.offsetWidth / 2;\n    }\n\n    noop() {}\n\n    getStarClass(starType) {\n      if (this.customCssClasses) {\n        return `ngx-stars-star-${starType}-${this.customClassIdentifier}`;\n      }\n\n      return `star-${starType}`;\n    } // this and the aria-labels and role in the html inspired by https://stackoverflow.com/q/55966205\n\n\n    getAriaLabel() {\n      return `Rating: ${this.rating} out of ${this.maxStars} stars ${this.readonly ? '' : '. Can be edited.'}`;\n    }\n\n  }\n\n  NgxStarsComponent.ɵfac = function NgxStarsComponent_Factory(t) {\n    return new (t || NgxStarsComponent)();\n  };\n\n  NgxStarsComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NgxStarsComponent,\n    selectors: [[\"ngx-stars\"]],\n    inputs: {\n      maxStars: \"maxStars\",\n      initialStars: \"initialStars\",\n      animationSpeed: \"animationSpeed\",\n      wholeStars: \"wholeStars\",\n      readonly: \"readonly\",\n      size: \"size\",\n      color: \"color\",\n      animation: \"animation\",\n      customPadding: \"customPadding\",\n      customStarIcons: \"customStarIcons\"\n    },\n    outputs: {\n      ratingOutput: \"ratingOutput\"\n    },\n    decls: 3,\n    vars: 3,\n    consts: [[\"role\", \"img\", 1, \"stars-line\", 3, \"mouseleave\"], [\"aria-hidden\", \"true\", 1, \"star\", \"zero-star\", 3, \"ngStyle\", \"click\", \"mousemove\"], [\"aria-hidden\", \"true\", 3, \"ngStyle\", \"click\", \"mousemove\", 4, \"ngFor\", \"ngForOf\"], [\"aria-hidden\", \"true\", 3, \"ngStyle\", \"click\", \"mousemove\"], [\"aria-hidden\", \"true\", 1, \"star\", 3, \"ngClass\", \"ngStyle\"]],\n    template: function NgxStarsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵlistener(\"mouseleave\", function NgxStarsComponent_Template_div_mouseleave_0_listener() {\n          return ctx.readonly ? ctx.noop() : ctx.onStarsUnhover();\n        });\n        ɵngcc0.ɵɵelementStart(1, \"span\", 1);\n        ɵngcc0.ɵɵlistener(\"click\", function NgxStarsComponent_Template_span_click_1_listener() {\n          return ctx.onZeroStarClick();\n        })(\"mousemove\", function NgxStarsComponent_Template_span_mousemove_1_listener() {\n          return ctx.readonly ? ctx.noop() : ctx.onZeroStarHover();\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(2, NgxStarsComponent_div_2_Template, 2, 3, \"div\", 2);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"aria-label\", ctx.getAriaLabel());\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngStyle\", ctx.starSize());\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.editableStars);\n      }\n    },\n    directives: [ɵngcc1.NgStyle, ɵngcc1.NgForOf, ɵngcc1.NgClass],\n    styles: [\".stars-line[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative}.stars-line[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{z-index:999}.zero-star[_ngcontent-%COMP%]{color:transparent;position:absolute;left:-16px}.star[_ngcontent-%COMP%]{display:inline-block;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat}.star-empty[_ngcontent-%COMP%]{-webkit-mask-image:url(\\\"data:image/svg+xml,%3Csvg aria-hidden='true' focusable='false' data-prefix='far' data-icon='star' class='svg-inline--fa fa-star fa-w-18' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 576 512'%3E%3Cpath fill='currentColor' d='M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z'%3E%3C/path%3E%3C/svg%3E%0A\\\");mask-image:url(\\\"data:image/svg+xml,%3Csvg aria-hidden='true' focusable='false' data-prefix='far' data-icon='star' class='svg-inline--fa fa-star fa-w-18' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 576 512'%3E%3Cpath fill='currentColor' d='M528.1 171.5L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6zM388.6 312.3l23.7 138.4L288 385.4l-124.3 65.3 23.7-138.4-100.6-98 139-20.2 62.2-126 62.2 126 139 20.2-100.6 98z'%3E%3C/path%3E%3C/svg%3E%0A\\\")}.star-half[_ngcontent-%COMP%]{-webkit-mask-image:url(\\\"data:image/svg+xml,%3C!-- had to hack this one's viewbox otherwise it didn't line up with the other two --%3E%3C!-- changed viewbox from '0 0 536 512' to '-20 0 576 512' --%3E%3Csvg aria-hidden='true' focusable='false' data-prefix='fas' data-icon='star-half-alt' class='svg-inline--fa fa-star-half-alt fa-w-17' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='-20 0 576 512'%3E%3Cpath fill='currentColor' d='M508.55 171.51L362.18 150.2 296.77 17.81C290.89 5.98 279.42 0 267.95 0c-11.4 0-22.79 5.9-28.69 17.81l-65.43 132.38-146.38 21.29c-26.25 3.8-36.77 36.09-17.74 54.59l105.89 103-25.06 145.48C86.98 495.33 103.57 512 122.15 512c4.93 0 10-1.17 14.87-3.75l130.95-68.68 130.94 68.7c4.86 2.55 9.92 3.71 14.83 3.71 18.6 0 35.22-16.61 31.66-37.4l-25.03-145.49 105.91-102.98c19.04-18.5 8.52-50.8-17.73-54.6zm-121.74 123.2l-18.12 17.62 4.28 24.88 19.52 113.45-102.13-53.59-22.38-11.74.03-317.19 51.03 103.29 11.18 22.63 25.01 3.64 114.23 16.63-82.65 80.38z'%3E%3C/path%3E%3C/svg%3E\\\");mask-image:url(\\\"data:image/svg+xml,%3C!-- had to hack this one's viewbox otherwise it didn't line up with the other two --%3E%3C!-- changed viewbox from '0 0 536 512' to '-20 0 576 512' --%3E%3Csvg aria-hidden='true' focusable='false' data-prefix='fas' data-icon='star-half-alt' class='svg-inline--fa fa-star-half-alt fa-w-17' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='-20 0 576 512'%3E%3Cpath fill='currentColor' d='M508.55 171.51L362.18 150.2 296.77 17.81C290.89 5.98 279.42 0 267.95 0c-11.4 0-22.79 5.9-28.69 17.81l-65.43 132.38-146.38 21.29c-26.25 3.8-36.77 36.09-17.74 54.59l105.89 103-25.06 145.48C86.98 495.33 103.57 512 122.15 512c4.93 0 10-1.17 14.87-3.75l130.95-68.68 130.94 68.7c4.86 2.55 9.92 3.71 14.83 3.71 18.6 0 35.22-16.61 31.66-37.4l-25.03-145.49 105.91-102.98c19.04-18.5 8.52-50.8-17.73-54.6zm-121.74 123.2l-18.12 17.62 4.28 24.88 19.52 113.45-102.13-53.59-22.38-11.74.03-317.19 51.03 103.29 11.18 22.63 25.01 3.64 114.23 16.63-82.65 80.38z'%3E%3C/path%3E%3C/svg%3E\\\")}.star-full[_ngcontent-%COMP%]{-webkit-mask-image:url(\\\"data:image/svg+xml,%3Csvg aria-hidden='true' focusable='false' data-prefix='fas' data-icon='star' class='svg-inline--fa fa-star fa-w-18' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 576 512'%3E%3Cpath fill='currentColor' d='M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z'%3E%3C/path%3E%3C/svg%3E\\\");mask-image:url(\\\"data:image/svg+xml,%3Csvg aria-hidden='true' focusable='false' data-prefix='fas' data-icon='star' class='svg-inline--fa fa-star fa-w-18' role='img' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 576 512'%3E%3Cpath fill='currentColor' d='M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z'%3E%3C/path%3E%3C/svg%3E\\\")}\"]\n  });\n  return NgxStarsComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nclass EditableStar {\n  constructor(position) {\n    this.position = position;\n  }\n\n}\n\nlet NgxStarsModule = /*#__PURE__*/(() => {\n  class NgxStarsModule {}\n\n  NgxStarsModule.ɵfac = function NgxStarsModule_Factory(t) {\n    return new (t || NgxStarsModule)();\n  };\n\n  NgxStarsModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NgxStarsModule\n  });\n  NgxStarsModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule]]\n  });\n  return NgxStarsModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NgxStarsModule, {\n    declarations: function () {\n      return [NgxStarsComponent];\n    },\n    imports: function () {\n      return [CommonModule];\n    },\n    exports: function () {\n      return [NgxStarsComponent];\n    }\n  });\n})();\n/*\n * Public API Surface of ngx-stars\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { EditableStar, NgxStarsComponent, NgxStarsModule }; //# sourceMappingURL=ngx-stars.js.map","map":null,"metadata":{},"sourceType":"module"}